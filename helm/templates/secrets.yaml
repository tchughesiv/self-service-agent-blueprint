{{- if .Values.requestManagement.enabled }}
---
apiVersion: v1
kind: Secret
metadata:
  name: api-keys
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "self-service-agent.labels" . | nindent 4 }}
type: Opaque
data:
  {{- if .Values.security.apiKeys.snowIntegration }}
  snow-integration: {{ .Values.security.apiKeys.snowIntegration | b64enc | quote }}
  {{- else }}
  snow-integration: {{ "changeme-snow-api-key" | b64enc | quote }}
  {{- end }}
  {{- if .Values.security.apiKeys.hrSystem }}
  hr-system: {{ .Values.security.apiKeys.hrSystem | b64enc | quote }}
  {{- else }}
  hr-system: {{ "changeme-hr-api-key" | b64enc | quote }}
  {{- end }}
  {{- if .Values.security.apiKeys.monitoringSystem }}
  monitoring-system: {{ .Values.security.apiKeys.monitoringSystem | b64enc | quote }}
  {{- else }}
  monitoring-system: {{ "changeme-monitoring-api-key" | b64enc | quote }}
  {{- end }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "self-service-agent.fullname" . }}-integration-secrets
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "self-service-agent.labels" . | nindent 4 }}
type: Opaque
data:
  {{- if .Values.security.slack.botToken }}
  slack-bot-token: {{ .Values.security.slack.botToken | b64enc | quote }}
  {{- else }}
  slack-bot-token: {{ "changeme-slack-bot-token" | b64enc | quote }}
  {{- end }}
  {{- if .Values.security.slack.signingSecret }}
  slack-signing-secret: {{ .Values.security.slack.signingSecret | b64enc | quote }}
  {{- else }}
  slack-signing-secret: {{ "changeme-slack-signing-secret" | b64enc | quote }}
  {{- end }}
  {{- if .Values.security.email.smtpHost }}
  smtp-host: {{ .Values.security.email.smtpHost | b64enc | quote }}
  {{- else }}
  smtp-host: {{ "localhost" | b64enc | quote }}
  {{- end }}
  smtp-port: {{ .Values.security.email.smtpPort | b64enc | quote }}
  {{- if .Values.security.email.smtpUsername }}
  smtp-username: {{ .Values.security.email.smtpUsername | b64enc | quote }}
  {{- else }}
  smtp-username: {{ "" | b64enc | quote }}
  {{- end }}
  {{- if .Values.security.email.smtpPassword }}
  smtp-password: {{ .Values.security.email.smtpPassword | b64enc | quote }}
  {{- else }}
  smtp-password: {{ "" | b64enc | quote }}
  {{- end }}
  smtp-use-tls: {{ .Values.security.email.smtpUseTls | b64enc | quote }}
  from-email: {{ .Values.security.email.fromEmail | b64enc | quote }}
  from-name: {{ .Values.security.email.fromName | b64enc | quote }}
{{- end }}
